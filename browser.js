var Altiva=function(){"use strict";var t=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},e=Object.freeze({default:t,__moduleExports:t}),n=e&&t||e,r=m,i=c,o=function(t){return h(c(t))},s=h,a=v,u=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function c(t){for(var e,n=[],r=0,i=0,o="";null!=(e=u.exec(t));){var s=e[0],a=e[1],c=e.index;if(o+=t.slice(i,c),i=c+s.length,a)o+=a[1];else{o&&(n.push(o),o="");var h=e[2],l=e[3],d=e[4],p=e[5],v=e[6],m=e[7],g="+"===v||"*"===v,y="?"===v||"*"===v,_=h||"/",w=d||p||(m?".*":"[^"+_+"]+?");n.push({name:l||r++,prefix:h||"",delimiter:_,optional:y,repeat:g,pattern:f(w)})}}return i<t.length&&(o+=t.substr(i)),o&&n.push(o),n}function h(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^"+t[r].pattern+"$"));return function(r){for(var i="",o=r||{},s=0;s<t.length;s++){var a=t[s];if("string"!=typeof a){var u,c=o[a.name];if(null==c){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(n(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var h=0;h<c.length;h++){if(u=encodeURIComponent(c[h]),!e[s].test(u))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');i+=(0===h?a.prefix:a.delimiter)+u}}else{if(u=encodeURIComponent(c),!e[s].test(u))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');i+=a.prefix+u}}else i+=a}return i}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function f(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function d(t,e){return t.keys=e,t}function p(t){return t.sensitive?"":"i"}function v(t,e){for(var n=(e=e||{}).strict,r=!1!==e.end,i="",o=t[t.length-1],s="string"==typeof o&&/\/$/.test(o),a=0;a<t.length;a++){var u=t[a];if("string"==typeof u)i+=l(u);else{var c=l(u.prefix),h=u.pattern;u.repeat&&(h+="(?:"+c+h+")*"),i+=h=u.optional?c?"(?:"+c+"("+h+"))?":"("+h+")?":c+"("+h+")"}}return n||(i=(s?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=r?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+i,p(e))}function m(t,e,r){return n(e=e||[])?r||(r={}):(r=e,e=[]),t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return d(t,e)}(t,e):n(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(m(t[i],e,n).source);return d(new RegExp("(?:"+r.join("|")+")",p(n)),e)}(t,e,r):function(t,e,n){for(var r=c(t),i=v(r,n),o=0;o<r.length;o++)"string"!=typeof r[o]&&e.push(r[o]);return d(i,e)}(t,e,r)}r.parse=i,r.compile=o,r.tokensToFunction=s,r.tokensToRegExp=a;var g,y,_=Object.freeze({default:r,__moduleExports:r,parse:i,compile:o,tokensToFunction:s,tokensToRegExp:a}),w=_&&r||_,b=R,x="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",k="undefined"!=typeof window&&(window.history.location||window.location),E=!0,C=!0,S="",A=!1;function R(t,e){if("function"==typeof t)return R("*",t);if("function"==typeof e)for(var n=new N(t),r=1;r<arguments.length;++r)R.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?R["string"==typeof e?"redirect":"show"](t,e):R.start(t)}function T(t){return"string"!=typeof t?t:C?decodeURIComponent(t.replace(/\+/g," ")):t}function O(t,e){"/"===t[0]&&0!==t.indexOf(S)&&(t=S+(A?"#!":"")+t);var n=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(S,"")||"/",A&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=e||{},this.state.path=t,this.querystring=~n?T(t.slice(n+1)):"",this.pathname=T(~n?t.slice(0,n):t),this.params={},this.hash="",!A){if(!~this.path.indexOf("#"))return;var r=this.path.split("#");this.path=r[0],this.hash=T(r[1])||"",this.querystring=this.querystring.split("#")[0]}}function N(t,e){e=e||{},this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=w(this.path,this.keys=[],e)}R.callbacks=[],R.exits=[],R.current="",R.len=0,R.base=function(t){if(0===arguments.length)return S;S=t},R.start=function(t){if(t=t||{},!g&&(g=!0,!1===t.dispatch&&(E=!1),!1===t.decodeURLComponents&&(C=!1),!1!==t.popstate&&window.addEventListener("popstate",P,!1),!1!==t.click&&document.addEventListener(x,U,!1),!0===t.hashbang&&(A=!0),E)){var e=A&&~k.hash.indexOf("#!")?k.hash.substr(2)+k.search:k.pathname+k.search+k.hash;R.replace(e,null,!0,E)}},R.stop=function(){g&&(R.current="",R.len=0,g=!1,document.removeEventListener(x,U,!1),window.removeEventListener("popstate",P,!1))},R.show=function(t,e,n,r){var i=new O(t,e);return R.current=i.path,!1!==n&&R.dispatch(i),!1!==i.handled&&!1!==r&&i.pushState(),i},R.back=function(t,e){R.len>0?(history.back(),R.len--):t?setTimeout(function(){R.show(t,e)}):setTimeout(function(){R.show(S,e)})},R.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&R(t,function(t){setTimeout(function(){R.replace(e)},0)}),"string"==typeof t&&void 0===e&&setTimeout(function(){R.replace(t)},0)},R.replace=function(t,e,n,r){var i=new O(t,e);return R.current=i.path,i.init=n,i.save(),!1!==r&&R.dispatch(i),i},R.dispatch=function(t){var e=y,n=0,r=0;function i(){var e=R.callbacks[n++];if(t.path===R.current)return e?void e(t,i):function(t){if(t.handled)return;var e;e=A?S+k.hash.replace("#!",""):k.pathname+k.search;if(e===t.canonicalPath)return;R.stop(),t.handled=!1,k.href=t.canonicalPath}(t);t.handled=!1}y=t,e?function t(){var n=R.exits[r++];if(!n)return i();n(e,t)}():i()},R.exit=function(t,e){if("function"==typeof t)return R.exit("*",t);for(var n=new N(t),r=1;r<arguments.length;++r)R.exits.push(n.middleware(arguments[r]))},R.Context=O,O.prototype.pushState=function(){R.len++,history.pushState(this.state,this.title,A&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},O.prototype.save=function(){history.replaceState(this.state,this.title,A&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},R.Route=N,N.prototype.middleware=function(t){var e=this;return function(n,r){if(e.match(n.path,n.params))return t(n,r);r()}},N.prototype.match=function(t,e){var n=this.keys,r=t.indexOf("?"),i=~r?t.slice(0,r):t,o=this.regexp.exec(decodeURIComponent(i));if(!o)return!1;for(var s=1,a=o.length;s<a;++s){var u=n[s-1],c=T(o[s]);void 0===c&&hasOwnProperty.call(e,u.name)||(e[u.name]=c)}return!0};var P=function(){var t=!1;if("undefined"!=typeof window)return"complete"===document.readyState?t=!0:window.addEventListener("load",function(){setTimeout(function(){t=!0},0)}),function(e){if(t)if(e.state){var n=e.state.path;R.replace(n,e.state)}else R.show(k.pathname+k.hash,void 0,void 0,!1)}}();function U(t){if(1===function(t){return null===(t=t||window.event).which?t.button:t.which}(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.path?t.path[0]:t.target;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var n="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var r=e.getAttribute("href");if((A||e.pathname!==k.pathname||!e.hash&&"#"!==r)&&!(r&&r.indexOf("mailto:")>-1)&&(n?!e.target.baseVal:!e.target)&&(n||j(e.href))){var i=n?e.href.baseVal:e.pathname+e.search+(e.hash||"");"undefined"!=typeof process&&i.match(/^\/[a-zA-Z]:\//)&&(i=i.replace(/^\/[a-zA-Z]:\//,"/"));var o=i;0===i.indexOf(S)&&(i=i.substr(S.length)),A&&(i=i.replace("#!","")),S&&o===i||(t.preventDefault(),R.show(o))}}}}}function j(t){var e=k.protocol+"//"+k.hostname;return k.port&&(e+=":"+k.port),t&&0===t.indexOf(e)}function D(){}function L(t,e){for(var n in e)t[n]=e[n];return t}function $(t){return document.createElement(t)}function B(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function M(t,e,n){t.setAttribute(e,n)}function F(t,e){t.removeAttribute(e)}function V(t,e){t.u(),t.d(),e[t.key]=null}function q(t,e){t.o(function(){V(t,e)})}function z(t){return t}function G(t,e,n,r,i,o){for(var s="{\n",a=0;a<=1;a+=16.666/r){s+=100*a+"%{"+o(t+n*i(a))+"}\n"}return s+"100% {"+o(e)+"}\n}"}function K(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}R.sameOrigin=j;var J={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(e=this.stylesheet.cssRules.length;e--;)this.stylesheet.deleteRule(e);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter(function(t){return-1===t.indexOf(e)}).join(", ")}};function X(){return Object.create(null)}function Z(t){this.destroy=D,this.fire("destroy"),this.set=this.get=D,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function H(t){Z.call(this,t),this.destroy=function(){console.warn("Component was already destroyed")}}function Q(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function W(t,e){return t!=t?e==e:t!==e}function Y(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var i=n[r];i.__calling||(i.__calling=!0,i.call(this,e),i.__calling=!1)}}function tt(t){return t&&console.warn("`let x = component.get('x')` is deprecated. Use `let { x } = component.get()` instead"),et.call(this,t)}function et(t){return t?this._state[t]:this._state}function nt(t,e,n){var r=e.bind(this);return n&&!1===n.init||r(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&r(e.current[t],e.previous&&e.previous[t])})}function rt(t,e,n){console.warn("this.observe(key, (newValue, oldValue) => {...}) is deprecated. Use\n\n  // runs before DOM updates\n  this.on('state', ({ changed, current, previous }) => {...});\n\n  // runs after DOM updates\n  this.on('update', ...);\n\n...or add the observe method from the svelte-extras package");var r=(t=""+t).search(/[.[]/);if(r>-1){var i="The first argument to component.observe(...) must be the name of a top-level property";throw r>0&&(i+=", i.e. '"+t.slice(0,r)+"' rather than '"+t+"'"),new Error(i)}return nt.call(this,t,e,n)}function it(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function ot(t,e){return"teardown"===t?(console.warn("Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2"),this.on("destroy",e)):it.call(this,t,e)}function st(t){this._set(L({},t)),this.root._lock||(this.root._lock=!0,ct(this.root._beforecreate),ct(this.root._oncreate),ct(this.root._aftercreate),this.root._lock=!1)}function at(t){var e=this._state,n={},r=!1;for(var i in t)this._differs(t[i],e[i])&&(n[i]=r=!0);r&&(this._state=L(L({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))}function ut(t){if("object"!=typeof t)throw new Error(this._debugName+".set was called without an object of data key-values to update.");this._checkReadOnly(t),st.call(this,t)}function ct(t){for(;t&&t.length;)t.shift()()}function ht(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)}function lt(){this._fragment&&this._fragment.u()}var ft={destroy:Z,get:et,fire:Y,observe:nt,on:it,set:st,teardown:Z,_recompute:D,_set:at,_mount:ht,_unmount:lt,_differs:Q},dt={destroy:H,get:tt,fire:Y,observe:rt,on:ot,set:ut,teardown:H,_recompute:D,_set:at,_mount:ht,_unmount:lt,_differs:Q},pt=Object.freeze({blankObject:X,destroy:Z,destroyDev:H,_differs:Q,_differsImmutable:W,fire:Y,getDev:tt,get:et,init:function(t,e){t._handlers=X(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store},observe:nt,observeDev:rt,on:it,onDev:ot,run:function(t){t()},set:st,_set:at,setDev:ut,callAll:ct,_mount:ht,_unmount:lt,isPromise:function(t){return t&&"function"==typeof t.then},PENDING:{},SUCCESS:{},FAILURE:{},removeFromStore:function(){this.store._remove(this)},proto:ft,protoDev:dt,appendNode:function(t,e){e.appendChild(t)},insertNode:function(t,e,n){e.insertBefore(t,n)},detachNode:function(t){t.parentNode.removeChild(t)},detachBetween:function(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)},detachBefore:function(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)},detachAfter:function(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)},reinsertBetween:function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))},reinsertChildren:function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)},reinsertAfter:function(t,e){for(;t.nextSibling;)e.appendChild(t.nextSibling)},reinsertBefore:function(t,e){for(var n=t.parentNode;n.firstChild!==t;)e.appendChild(n.firstChild)},destroyEach:function(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()},createFragment:function(){return document.createDocumentFragment()},createElement:$,createSvgElement:B,createText:I,createComment:function(){return document.createComment("")},addListener:function(t,e,n){t.addEventListener(e,n,!1)},removeListener:function(t,e,n){t.removeEventListener(e,n,!1)},setAttribute:M,setAttributes:function(t,e){for(var n in e)n in t?t[n]=e[n]:void 0===e[n]?F(t,n):M(t,n,e[n])},removeAttribute:F,setXlinkAttribute:function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)},getBindingGroupValue:function(t){for(var e=[],n=0;n<t.length;n+=1)t[n].checked&&e.push(t[n].__value);return e},toNumber:function(t){return""===t?void 0:+t},timeRangesToArray:function(t){for(var e=[],n=0;n<t.length;n+=1)e.push({start:t.start(n),end:t.end(n)});return e},children:function(t){return Array.from(t.childNodes)},claimElement:function(t,e,n,r){for(var i=0;i<t.length;i+=1){var o=t[i];if(o.nodeName===e){for(var s=0;s<o.attributes.length;s+=1){var a=o.attributes[s];n[a.name]||o.removeAttribute(a.name)}return t.splice(i,1)[0]}}return r?B(e):$(e)},claimText:function(t,e){for(var n=0;n<t.length;n+=1){var r=t[n];if(3===r.nodeType)return r.data=e,t.splice(n,1)[0]}return I(e)},setInputType:function(t,e){try{t.type=e}catch(t){}},setStyle:function(t,e,n){t.style.setProperty(e,n)},selectOption:function(t,e){for(var n=0;n<t.options.length;n+=1){var r=t.options[n];if(r.__value===e)return void(r.selected=!0)}},selectOptions:function(t,e){for(var n=0;n<t.options.length;n+=1){var r=t.options[n];r.selected=~e.indexOf(r.__value)}},selectValue:function(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value},selectMultipleValue:function(t){return[].map.call(t.querySelectorAll(":checked"),function(t){return t.__value})},destroyBlock:V,outroAndDestroyBlock:q,updateKeyedEach:function(t,e,n,r,i,o,s,a,u,c,h,l,f){for(var d=t.length,p=o.length,v=d,m={};v--;)m[t[v].key]=v;var g=[],y={},_={};for(v=p;v--;){var w=o[v][r],b=s[w];b?i&&b.p(n,f(v)):(b=c(e,w,f(v))).c(),g[v]=y[w]=b,w in m&&(_[w]=Math.abs(v-m[w]))}var x={},k={},E=u?q:V;function C(t){t[h](a,l),s[t.key]=t,l=t.first,p--}for(;d&&p;){var S=g[p-1],A=t[d-1],R=S.key,T=A.key;S===A?(l=S.first,d--,p--):y[T]?!s[R]||x[R]?C(S):k[T]?d--:_[R]>_[T]?(k[R]=!0,C(S)):(x[T]=!0,d--):(E(A,s),d--)}for(;d--;)y[(A=t[d]).key]||E(A,s);for(;p;)C(g[p-1]);return g},getSpreadUpdate:function(t,e){for(var n={},r={},i={},o=t.length;o--;){var s=t[o],a=e[o];if(a){for(var u in s)u in a||(r[u]=1);for(var u in a)i[u]||(n[u]=a[u],i[u]=1);t[o]=a}else for(var u in s)i[u]=1}for(var u in r)u in n||(n[u]=void 0);return n},linear:z,generateRule:G,hash:K,wrapTransition:function(t,e,n,r,i,o){var s,a=n(e,r),u=a.duration||300,c=a.easing||z;if(a.css&&!J.stylesheet){var h=$("style");document.head.appendChild(h),J.stylesheet=h.sheet}return i&&(a.css&&a.delay&&(s=e.style.cssText,e.style.cssText+=a.css(0)),a.tick&&a.tick(0)),{t:i?0:1,running:!1,program:null,pending:null,run:function(t,e){var n={start:window.performance.now()+(a.delay||0),intro:t,callback:e};a.delay?this.pending=n:this.start(n),this.running||(this.running=!0,J.add(this))},start:function(n){t.fire(n.intro?"intro.start":"outro.start",{node:e}),n.a=this.t,n.b=n.intro?1:0,n.delta=n.b-n.a,n.duration=u*Math.abs(n.b-n.a),n.end=n.start+n.duration,a.css&&(a.delay&&(e.style.cssText=s),n.rule=G(n.a,n.b,n.delta,n.duration,c,a.css),J.addRule(n.rule,n.name="__svelte_"+K(n.rule)),e.style.animation=(e.style.animation||"").split(", ").filter(function(t){return t&&(n.delta<0||!/__svelte/.test(t))}).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")),this.program=n,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*c(n/e.duration),a.tick&&a.tick(this.t)}},done:function(){var t=this.program;this.t=t.b,a.tick&&a.tick(this.t),a.css&&J.deleteRule(e,t.name),t.callback(),t=null,this.running=!!this.pending},abort:function(){a.tick&&a.tick(1),a.css&&J.deleteRule(e,this.program.name),this.program=this.pending=null,this.running=!1}}},transitionManager:J,noop:D,assign:L});function vt(t,e){this._observers={pre:X(),post:X()},this._handlers={},this._dependents=[],this._computed=X(),this._sortedComputedProperties=[],this._state=L({},t),this._differs=e&&e.immutable?W:Q}L(vt.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=X();function i(o){if(t[o])throw new Error("Cyclical dependency detected");if(!r[o]){r[o]=!0;var s=e[o];s&&(t[o]=!0,s.deps.forEach(i),n.push(s))}}for(var o in this._computed)t=X(),i(o)},compute:function(t,e,n){var r,i=this,o={deps:e,update:function(o,s,a){var u=e.map(function(t){return t in s&&(a=!0),o[t]});if(a){var c=n.apply(null,u);i._differs(c,r)&&(r=c,s[t]=!0,o[t]=r)}}};o.update(this._state,{},!0),this._computed[t]=o,this._sortComputedProperties()},fire:Y,get:et,observe:nt,on:it,onchange:function(t){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",function(e){t(e.current,e.changed)})},set:function(t){var e=this._state,n=this._changed={},r=!1;for(var i in t){if(this._computed[i])throw new Error("'"+i+"' is a read-only property");this._differs(t[i],e[i])&&(n[i]=r=!0)}if(r){this._state=L(L({},e),t);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,n);this.fire("state",{changed:n,current:this._state,previous:e});var s=this._dependents.slice();for(o=0;o<s.length;o+=1){var a=s[o],u={};r=!1;for(var c=0;c<a.props.length;c+=1){var h=a.props[c];h in n&&(u["$"+h]=this._state[h],r=!0)}r&&a.component.set(u)}this.fire("update",{changed:n,current:this._state,previous:e})}}});const mt={config:{initial:"/"},configBaseUrl(){"file:"!==window.location.protocol?mt.config.path=window.location.origin:mt.config.path=window.location.pathname.replace("/index.html",""),mt.load.baseUrl=mt.config.path+mt.load.baseUrl},configPageJs(){for(const t in mt.routes)b(t,()=>{mt.routes[t].then(()=>mt.root.set({_route:t}))});mt.fileOrMobile()?(b({dispatch:!1}),b(mt.config.initial)):b()},component:{},defaults:{},fileOrMobile:()=>window&&(window.cordova||"file:"==window.location.protocol),load:t=>new Promise((e,n)=>{if(mt.component[t])e(!0);else{let r;const i=new XMLHttpRequest;i.open("GET",mt.load.baseUrl+t+".js");const o=function(){4!==i.readyState||r||(mt.component[t]=new Function("return "+i.responseText)(),e(!0),r=!0)};i.onload=i.onreadystatechange=o,i.onerror=n,i.send(),4===i.readyState&&o()}}),preloadComponents(){const t=mt.fileOrMobile()?mt.config.initial:window.location.pathname,e="/"==t.slice(-1)?t.slice(0,-1):t+"/",n={then:()=>console.log("[Altiva] 404: Can't load your app since the url '"+t+"' or '"+e+"' is not defined in your app.js file")};return mt.routes[t]?mt.routes[t]:mt.routes[e]?mt.routes[e]:n},route(t,e){void 0===e?b(t):b(t,e)},routes:{},root:null,shared:pt,startInstance(t){t?t.target||(t.target=document.body):t={target:document.body},this.defaults.useStore&&(this.store=new vt,t.store=this.store),mt.root=new App(t),window[this.defaults.globalVar]=mt.root},store:null,start(t){mt.configBaseUrl(),mt.preloadComponents().then(()=>{mt.startInstance(t),mt.configPageJs()})}};return mt.load.baseUrl="/components/",mt}();
